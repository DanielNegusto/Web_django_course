{% extends 'catalog/base.html' %}

{% block title %}Добавить товар{% endblock %}

{% block content %}
<h1>{% if form.instance.pk %}Редактировать{% else %}Добавить{% endif %} продукт</h1>
<form method="post" enctype="multipart/form-data">  <!-- Добавлено enctype -->
    {% csrf_token %}

    <div class="form-group">
        {{ form.name.label }}
        {{ form.name }}
        {% for error in form.name.errors %}
            <div class="alert alert-danger">{{ error }}</div>
        {% endfor %}
    </div>

    <div class="form-group">
        {{ form.description.label }}
        {{ form.description }}
        {% for error in form.description.errors %}
            <div class="alert alert-danger">{{ error }}</div>
        {% endfor %}
    </div>

    <div class="form-group">
        {{ form.price.label }}
        {{ form.price }}
        {% for error in form.price.errors %}
            <div class="alert alert-danger">{{ error }}</div>
        {% endfor %}
    </div>

    <div class="form-group">
        {{ form.category.label }}
        {{ form.category }}
        {% for error in form.category.errors %}
            <div class="alert alert-danger">{{ error }}</div>
        {% endfor %}
    </div>

    <!-- Поле для новой категории -->
    <div class="form-group">
        {{ form.new_category.label }}
        {{ form.new_category }}
        {% for error in form.new_category.errors %}
            <div class="alert alert-danger">{{ error }}</div>
        {% endfor %}
    </div>

    <div class="form-group">
        {{ form.image.label }}
        {{ form.image }}
        {% for error in form.image.errors %}
            <div class="alert alert-danger">{{ error }}</div>
        {% endfor %}
    </div>

    <div class="form-group">
        {{ form.status.label }}
        {{ form.status }}
        {% for error in form.status.errors %}
            <div class="alert alert-danger">{{ error }}</div>
        {% endfor %}
    </div>

    <button type="submit" class="btn btn-primary">Сохранить</button>
</form>

<a href="{% url 'catalog:catalog' %}" class="btn btn-secondary">Назад</a>

{% endblock %}
